<div class="container">
    <h1 class="mat-h1">
        <mat-icon>history</mat-icon>
        History
    </h1>

    <div class="heading-container">
        <button mat-raised-button color="primary" (click)="onLoadFullHistory()">
            View full history of sent emails
        </button>
        <span class="separator">
            OR
        </span>
        <form [formGroup]="formGroup" name="formGroup" (ngSubmit)="onSubmitDateRange()">
            <mat-form-field appearance="fill">
                <mat-label>Enter a date range</mat-label>
                <mat-date-range-input [rangePicker]="picker">
                    <input matStartDate placeholder="Start date" [formControlName]="'startDate'">
                    <input matEndDate placeholder="End date" [formControlName]="'endDate'">
                </mat-date-range-input>
                <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                <mat-date-range-picker #picker></mat-date-range-picker>
            </mat-form-field>

            <button mat-raised-button color="primary" type="submit">
                Go
            </button>
        </form>
    </div>

    <div class="sent-emails-container" *ngIf="sentEmails!.length else empty">
        <h2 class="mat-h2">
            Showing: <strong>{{ historyRecordsHeading }}</strong>
        </h2>
        <mat-card *ngFor="let sentEmail of sentEmails">
            <mat-card-title>
                Subject: {{ sentEmail.subject }}
            </mat-card-title>
            <mat-card-content>
                <div>
                    <span class="email-field">From: </span>
                    {{ sentEmail.senderEmail }}
                </div>
                <div>
                    <span class="email-field">To: </span>
                    {{ sentEmail.recipientEmail }}
                </div>
                <div>
                    <span class="email-field">Date: </span>
                    {{ sentEmail.timestamp }}
                </div>
                <div>
                    <span class="email-field">Sent successfully: </span>
                    <span class="sent-successfully-field" [class.sent-successfully]="sentEmail.sentSuccessfully">
                        {{ sentEmail.sentSuccessfully ? 'Yes' : 'No' }}
                    </span>
                </div>
                <div>
                    <span class="email-field">Message: </span>
                    {{ sentEmail.message }}
                </div>
            </mat-card-content>
        </mat-card>
    </div>
</div>

<ng-template #empty>
    <!-- <h4 class="mat-h4 title">
        History N/A
    </h4> -->
</ng-template>
